<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://blog.bookbook.in').hostname,
    root: '/',
    scheme: 'Pisces',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="关系、健康、自由，是我的追求。">
<meta property="og:type" content="website">
<meta property="og:title" content="Book Book, Come in~">
<meta property="og:url" content="http://blog.bookbook.in/page/4/index.html">
<meta property="og:site_name" content="Book Book, Come in~">
<meta property="og:description" content="关系、健康、自由，是我的追求。">
<meta property="article:author" content="知明所以">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://blog.bookbook.in/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>Book Book, Come in~</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Book Book, Come in~</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">知明所以的博客</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://blog.bookbook.in/2016/03/08/%E6%89%AF%E6%B7%A1/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="知明所以">
      <meta itemprop="description" content="关系、健康、自由，是我的追求。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Book Book, Come in~">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/08/%E6%89%AF%E6%B7%A1/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/" class="post-title-link" itemprop="url">程序员的自我修养</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-03-08 00:00:00" itemprop="dateCreated datePublished" datetime="2016-03-08T00:00:00+08:00">2016-03-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-01-13 13:00:17" itemprop="dateModified" datetime="2019-01-13T13:00:17+08:00">2019-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%89%AF%E6%B7%A1/" itemprop="url" rel="index">
                    <span itemprop="name">扯淡</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>摘要：这并不是一份全方位的修养提升建议，只是把我擅长的地方总结下来，一起学习。</p>
<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><ol>
<li>程序员的技能要求有两方面：一是，针对特定平台的特定技能，比如Android开发、cocos2d-x开发、mysql数据库设计等，以下简称为<strong>特定技能</strong>；二是，所有平台通用的、普适的技术原理或思维方式，比如数据结构、算法、设计模式、网络、数据库、图形框架、多线程等，以下简称为<strong>普适技能</strong>。</li>
<li><strong>特定技能是可速成的</strong>。举个例子，对于<strong>任何特定技能</strong>，我只需一份Official Develop Guide，一本O’realy的cookbook，几份Github用例代码，都可在1个月内成为合格的前线程序员。我这么说是因为我成功过很多次，包括<code>iOS,Android,cocos2d-x,PHP</code>应用。这并不是什么了不起的技能，因为从根本上说，学习<strong>特定技能</strong>就是熟悉API、使用API的过程，都是不需要消化的死的知识。稍微需要一点思考的是此平台的设计思想，但这只占一小部分。我见过月薪15k的iOS程序员，在不了解框架原理的情况下仍然能把功能完成的很好。</li>
<li><strong>普适技能是内功</strong>。它体现了程序员的思维能力，决定着程序员的上限，也决定着是否能快速适应另一门<strong>特定技能</strong>。内功不会凭空而来，也不会仅仅因为你对某一种<strong>特定技能</strong>精通就内功大增。这中间必须有一个“博览群书”的过程，一种设计思想或技巧，在一个地方出现过你不会注意到，也不知道哪些是核心哪些是辅助。如果在很多平台都出现，你就会发现核心在哪里，以后大有所用，而哪些只是辅助代码。</li>
<li><strong>普适技能和特定技能是相辅相成，不可分割的</strong>。对普适技能更深刻的理解，能促进程序员更好更快的学习新的特定技能；而普适技能也必须在学习和使用特定技能的过程中，才能理解的更深刻，特别对于设计模式、数据库等普适技能，书本上的原理是远远不够的，没有大量的生产经验，不可能充分理解。</li>
</ol>
<h2 id="关于设计模式"><a href="#关于设计模式" class="headerlink" title="关于设计模式"></a>关于设计模式</h2><ol>
<li>设计模式本身是没有存在意义的，这种层级的抽象，它的价值只有在具体应用中才能体现。</li>
<li>一个程序员，学习过OO基本思想，有一年生产性编码经验，即使没专门学习过<strong>设计模式</strong>，必定已经用过其中的很多种。常见的框架或平台，比如Android、iOS、Mina，本身都处处有设计模式的影子，只要你写代码，它就无处不在。</li>
<li>不懂设计模式你仍然可以写好代码，因为人们也是在实际编码中“发现”这样写比较方便，当这种情况发生过很多次，便成了<strong>设计模式</strong>。</li>
<li>基于以上，一个初级程序员，不可能在深入学习了23种设计模式的原理和背景之后，就能立马使用。设计模式的使用，必然要基于大量的编码经验和对代码结构的理解。最常见的学习过程是：你已经在编码中使用过很多次-&gt;发现跟某种设计模式很像-&gt;理解应用场景-&gt;熟练使用。</li>
<li>基于以上，两年以内的程序员，学习设计模式并不需要太用力，更不要希望立马让千丝万缕的代码变得井井有条。理解OO基本思想，多写代码，多看正在使用的框架的源码，再结合设计模式，才是合理的道路。</li>
</ol>
<h2 id="关于图形框架"><a href="#关于图形框架" class="headerlink" title="关于图形框架"></a>关于图形框架</h2><ol>
<li>这里的<strong>图形框架</strong>指的是，前端编程中，负责渲染图像和处理用户动作的模块。两个核心：<strong>渲染图像，处理动作</strong>。不管是AS3,cocos2d-x,iOS cocosUI,Android UI都是在解决这两个问题。</li>
<li></li>
</ol>
<h2 id="关于算法"><a href="#关于算法" class="headerlink" title="关于算法"></a>关于算法</h2><h2 id="关于网络"><a href="#关于网络" class="headerlink" title="关于网络"></a>关于网络</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://blog.bookbook.in/2016/03/08/%E6%8A%80%E6%9C%AF/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="知明所以">
      <meta itemprop="description" content="关系、健康、自由，是我的追求。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Book Book, Come in~">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/08/%E6%8A%80%E6%9C%AF/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">[设计模式]结构型模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-03-08 00:00:00" itemprop="dateCreated datePublished" datetime="2016-03-08T00:00:00+08:00">2016-03-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-01-13 13:00:17" itemprop="dateModified" datetime="2019-01-13T13:00:17+08:00">2019-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>简要：开发中，有些知识我们只需学一次，在实际生产中又能得到频繁的使用。如果淡忘了，很容易能找回来，那就不需要记忆。比如Android的某个调用通知的API。还有一些知识，必须时刻记在脑子里，才有可能被用到。一旦淡忘了，就会越来越远离我们，并且实际的编码过程中也很难唤起记忆，那就需要我们经常复习。比如，设计模式。</p>
<h2 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h2><p>最直观的理解就是：中英式转换插头。<br><img src="Adapter.jpg" alt=""></p>
<h2 id="桥接模式"><a href="#桥接模式" class="headerlink" title="桥接模式"></a>桥接模式</h2><p>一个简单的例子：<br><img src="Bridge.png" alt=""></p>
<p>理解桥接模式，重点需要理解如何将抽象化(Abstraction)与实现化(Implementation)脱耦，使得二者可以独立地变化。</p>
<ul>
<li>你不希望在抽象和它的实现部分之间有一个固定的绑定关系。例如这种情况可能是因为，在程序运行时刻实现部分应可以被选择或者切换。</li>
<li>一个类存在两个独立变化的维度，且这两个维度都需要进行扩展。虽然在系统中使用继承是没有问题的，但是由于抽象化角色和具体化角色需要独立变化，设计要求需要独立管理这两者。</li>
<li>对于那些不希望使用继承或因为多层次继承导致系统类的个数急剧增加的系统，桥接模式尤为适用。</li>
</ul>
<p>模型图：<br><img src="Bridge.jpg" alt=""></p>
<h3 id="举个栗子"><a href="#举个栗子" class="headerlink" title="举个栗子"></a>举个栗子</h3><p>比如一个动物<code>IAnimal</code>, 有移动,呼吸,吃东西,繁殖四种行为.我们把这几种行为都抽象出来, 变成<code>IMovable,IBreathable,IEatable,IBreedable</code>. 上面的四个接口, 每个接口都有若干种实现方式, 比如<code>IMovable</code>有<code>Swamable</code>,<code>Runnable</code>,<code>Fliable</code>三种实现方式. 这样, 我们<strong>定义</strong>或者说<strong>添加</strong>一种新动物<code>AnimalNew</code>的时候, 只需把对应的行为方式组装到<code>AnimalNew</code>中即可.</p>
<p>深刻体会过的例子是游戏的<strong>背包系统</strong>. 背包中每个物品有交易(买卖),穿戴(佩戴),损耗(随着某个变量而效果减少),作用(属性加成),生成tips…等行为</p>
<h2 id="组合模式"><a href="#组合模式" class="headerlink" title="组合模式"></a>组合模式</h2><p>将对象组合成树形结构以表示“部分-整体”的层次结构。Composite使得用户对单个对象和组合对象的使用具有一致性。</p>
<p>最典型的例子是UI系统的树形结构。</p>
<h2 id="装饰模式"><a href="#装饰模式" class="headerlink" title="装饰模式"></a>装饰模式</h2><p>一般有两种方式可以实现给一个类或对象增加行为：</p>
<ul>
<li>继承机制，使用继承机制是给现有类添加功能的一种有效途径，通过继承一个现有类可以使得子类在拥有自身方法的同时还拥有父类的方法。但是这种方法是静态的，用户不能控制增加行为的方式和时机。</li>
<li>关联机制，即将一个类的对象嵌入另一个对象中，由另一个对象来决定是否调用嵌入对象的行为以便扩展自己的行为，我们称这个嵌入的对象为装饰器(Decorator)</li>
</ul>
<p><img src="Decorator.jpg" alt=""></p>
<p>最常见的例子：</p>
<p><img src="Decorator-Example.png" alt=""></p>
<h2 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a>外观模式</h2><ul>
<li>外观模式要求一个子系统的外部与其内部的通信通过一个统一的外观对象进行，外观类将客户端与子系统的内部复杂性分隔开，使得客户端只需要与外观对象打交道，而不需要与子系统内部的很多对象打交道。</li>
<li>当要为一个复杂子系统提供一个简单接口时可以使用外观模式。该接口可以满足大多数用户的需求，而且用户也可以越过外观类直接访问子系统。</li>
<li>客户程序与多个子系统之间存在很大的依赖性。引入外观类将子系统与客户以及其他子系统解耦，可以提高子系统的独立性和可移植性。</li>
</ul>
<p><img src="Facade.jpg" alt=""></p>
<p>直观的例子：</p>
<p><img src="Facade-Exmaple.png" alt=""></p>
<h2 id="享元模式"><a href="#享元模式" class="headerlink" title="享元模式"></a>享元模式</h2><p>最典型的例子，文字渲染程序：</p>
<p><img src="Flyweight-example.png" alt=""></p>
<p>在以下情况下可以使用享元模式：</p>
<ul>
<li>一个系统有大量相同或者相似的对象，由于这类对象的大量使用，造成内存的大量耗费。</li>
<li>对象的大部分状态都可以外部化，可以将这些外部状态传入对象中。</li>
<li>使用享元模式需要维护一个存储享元对象的享元池，而这需要耗费资源，因此，应当在多次重复使用享元对象时才值得使用享元模式。</li>
<li>并非所有的Flyweight子类都需要被共享。Flyweight接口使共享成为可能，但它并不强制共享。在Flyweight对象结构的某些层次，UnsharedConcreteFlyweight对象通常将ConcreteFlyweight对象作为子节点(Row和Column就是这样)。</li>
</ul>
<p><img src="Flyweight.jpg" alt=""></p>
<h2 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h2><ul>
<li>为其它对象提供一种代理以控制对这个对象的访问。对一个对象进行访问控制的一个原因是为了只有在我们确实需要这个对象时才对他进行创建和初始化。</li>
<li>一些常见的可以使用Proxy模式的情况：<ul>
<li>远程代理：为一个对象在不同的地址空间提供局部代表。</li>
<li>虚代理：根据需要创建开销很大的对象。</li>
<li>保护代理：控制对原始对象的访问。</li>
<li>智能指引：取代了简单的指针，他在访问对象时执行了一些附加的操作。</li>
</ul>
</li>
</ul>
<p><img src="Proxy.jpg" alt=""></p>
<h2 id="一些区分"><a href="#一些区分" class="headerlink" title="一些区分"></a>一些区分</h2><ul>
<li>Facade定义一个新的借口，而Adapter则复用一个原有的接口，让之前的两个接口能协同工作。</li>
<li>Decorator旨在不需要生成子类即可以给对象添加职责。这样就避免了静态实现所有功能组合，从而导致子类急剧增加。</li>
<li>Proxy的设计目的是，当直接访问一个实体不方便或者不符合需求时，为这个尸体提供一个替代者。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://blog.bookbook.in/2016/03/07/%E6%8A%80%E6%9C%AF/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="知明所以">
      <meta itemprop="description" content="关系、健康、自由，是我的追求。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Book Book, Come in~">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/07/%E6%8A%80%E6%9C%AF/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">[设计模式]创建型模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-03-07 18:05:00" itemprop="dateCreated datePublished" datetime="2016-03-07T18:05:00+08:00">2016-03-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-01-13 13:00:17" itemprop="dateModified" datetime="2019-01-13T13:00:17+08:00">2019-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>摘要：设计模式并不能减小系统的复杂度，并不能减少<code>if...else...</code>。它只是帮助把代码放在适当的位置，以便在需求更改时改动的代码最少。</p>
<h2 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a>简单工厂模式</h2><ul>
<li>简单工厂模式的要点在于：当你需要什么，只需要传入一个正确的参数，就可以获取你所需要的对象，而无须知道其创建细节。</li>
<li>简单工厂模式最大的优点在于实现对象的创建和对象的使用分离，将对象的创建交给专门的工厂类负责，但是其最大的缺点在于工厂类不够灵活，增加新的具体产品需要修改工厂类的判断逻辑代码，而且产品较多时，工厂方法代码将会非常复杂。</li>
<li>简单工厂模式适用情况包括：工厂类负责创建的对象比较少；客户端只知道传入工厂类的参数，对于如何创建对象不关心。</li>
</ul>
<p><img src="SimpleFactory.jpg" alt=""></p>
<h2 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h2><p>本质上说就是产品创建功能的下放，交给子类去做。</p>
<ul>
<li>工厂方法模式是简单工厂模式的进一步抽象和推广。由于使用了面向对象的多态性，工厂方法模式保持了简单工厂模式的优点，而且克服了它的缺点。在工厂方法模式中，核心的工厂类不再负责所有产品的创建，而是将具体创建工作交给子类去做。这个核心类仅仅负责给出具体工厂必须实现的接口，而不负责产品类被实例化这种细节，这使得工厂方法模式可以允许系统在不修改工厂角色的情况下引进新产品。</li>
<li>工厂方法模式的主要优点是增加新的产品类时无须修改现有系统，并封装了产品对象的创建细节，系统具有良好的灵活性和可扩展性；其缺点在于增加新产品的同时需要增加新的工厂，导致系统类的个数成对增加，在一定程度上增加了系统的复杂性。</li>
</ul>
<p><img src="FactoryMethod.jpg" alt=""></p>
<h2 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h2><p>最重要的概念：<strong>产品族</strong>。<br>抽象工厂模式适用情况包括：  </p>
<ul>
<li>一个系统不应当依赖于产品类实例如何被创建、组合和表达的细节；</li>
<li>系统中有多于一个的产品族，而每次只使用其中某一产品族；</li>
<li>属于同一个产品族的产品将在一起使用；</li>
<li>系统提供一个产品类的库，所有的产品以同样的接口出现，从而使客户端不依赖于具体实现。</li>
</ul>
<p><img src="AbatractFactory.jpg" alt=""></p>
<h2 id="建造者模式"><a href="#建造者模式" class="headerlink" title="建造者模式"></a>建造者模式</h2><ul>
<li>在建造者模式的结构中引入了一个指挥者类，该类的作用主要有两个：一方面它隔离了客户与生产过程；另一方面它负责控制产品的生成过程。指挥者针对抽象建造者编程，客户端只需要知道具体建造者的类型，即可通过指挥者类调用建造者的相关方法，返回一个完整的产品对象。</li>
<li>建造者模式适用情况包括：需要生成的产品对象有复杂的内部结构，这些产品对象通常包含多个成员属性；需要生成的产品对象的属性相互依赖，需要指定其生成顺序；对象的创建过程独立于创建该对象的类；隔离复杂对象的创建和使用，并使得相同的创建过程可以创建不同类型的产品。</li>
<li>建造者模式所创建的产品一般具有较多的共同点，其组成部分相似，如果产品之间的差异性很大，则不适合使用建造者模式，因此其使用范围受到一定的限制。</li>
</ul>
<p><img src="Builder.jpg" alt=""></p>
<h2 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h2><p>（略）</p>
<h2 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h2><p>关键字： <code>- clone();</code>;</p>
<h2 id="区分"><a href="#区分" class="headerlink" title="区分"></a>区分</h2><ol>
<li>抽象工厂模式与建造者模式相似，都可以创建组复杂对象。主要的区别是Builder模式着重于一步步构建一个复杂对象。而Abstract Factory着重于多个系列的产品对象。Builder在最后一步返回产品（封装了产品的构建），而对于Abstract Factory来说，产品是立即返回的。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://blog.bookbook.in/2016/03/07/%E6%8A%80%E6%9C%AF/[PHP]%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Yii2%E7%9A%84ActiveRecord/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="知明所以">
      <meta itemprop="description" content="关系、健康、自由，是我的追求。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Book Book, Come in~">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/07/%E6%8A%80%E6%9C%AF/%5BPHP%5D%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Yii2%E7%9A%84ActiveRecord/" class="post-title-link" itemprop="url">[PHP]深入理解Yii2的ActiveRecord</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-03-07 12:23:00" itemprop="dateCreated datePublished" datetime="2016-03-07T12:23:00+08:00">2016-03-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-01-13 13:00:17" itemprop="dateModified" datetime="2019-01-13T13:00:17+08:00">2019-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>摘要：<code>ActiveRecord</code>、<code>QueryCommand</code>的原理和关系。</p>
<h1 id=""><a href="#" class="headerlink" title=""></a></h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://blog.bookbook.in/2016/03/07/%E6%8A%80%E6%9C%AF/[other]%E8%AF%A5%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Exception/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="知明所以">
      <meta itemprop="description" content="关系、健康、自由，是我的追求。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Book Book, Come in~">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/07/%E6%8A%80%E6%9C%AF/%5Bother%5D%E8%AF%A5%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Exception/" class="post-title-link" itemprop="url">[other]该如何使用Exception</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-03-07 12:23:00" itemprop="dateCreated datePublished" datetime="2016-03-07T12:23:00+08:00">2016-03-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-01-13 13:00:17" itemprop="dateModified" datetime="2019-01-13T13:00:17+08:00">2019-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>摘要：怎么处理别人的Exception？什么时候改抛发自己的Exception？</p>
<h1 id="Exception有什么好处"><a href="#Exception有什么好处" class="headerlink" title="Exception有什么好处?"></a>Exception有什么好处?</h1><ol>
<li>让你的错误信息更完整，接口更统一。</li>
<li>常见的，用函数返回至来标记错误的方式，灵活性很差。</li>
</ol>
<h1 id="Gunjan-Doshi的博客"><a href="#Gunjan-Doshi的博客" class="headerlink" title="Gunjan Doshi的博客"></a>Gunjan Doshi的博客</h1><p>Gunjan Doshi的博客<a href="http://www.onjava.com/pub/a/onjava/2003/11/19/exceptions.html" target="_blank" rel="noopener">Best Practices for Exception Handling</a>谈了一些经验，总结来说就是:</p>
<h2 id="如何抛发自己的Exception"><a href="#如何抛发自己的Exception" class="headerlink" title="如何抛发自己的Exception"></a>如何抛发自己的Exception</h2><ol>
<li>如果你的客户端程序能处理它，你就抛发 checked exception；如果你的客户端程序对这个exception除了打印出来什么也做不了，就throw unchecked exception。</li>
<li>如果一个exception你处理不了，请不要单纯的打印出来，最好的方法是继续把它封装成 unchecked exception 继续throw.</li>
<li>如果你define一个新的exception，一定要提供更多的信息，不要让你的class定义只有构造函数。如果觉得没什么更多的信息，那就不要define，直接用 Exception。</li>
</ol>
<h2 id="如何处理别人的Exception"><a href="#如何处理别人的Exception" class="headerlink" title="如何处理别人的Exception"></a>如何处理别人的Exception</h2><ol>
<li>在try{}catch{}后一定要记得清理现场，处理后事。e.g. 如果发生数据库连接异常，一定要在finally里断开连接。</li>
<li>不要用exception做flow control，效率低的一B。</li>
<li>如果某个exception你处理不了，重新抛发它，千万不要包庇隐藏它。</li>
<li>千万不要出现<code>catch(Exception e)</code>这样的代码，它会把所有的exception捕捉在这里，你能处理的，不能处理的，全在。</li>
<li>一个exception只log一次。</li>
</ol>
<h1 id="The-Digital-Gabeg-在-Github-上的回答"><a href="#The-Digital-Gabeg-在-Github-上的回答" class="headerlink" title="The Digital Gabeg 在 Github 上的回答"></a>The Digital Gabeg 在 Github 上的回答</h1><p>当且仅当你的方法的最基本的前提假设不满足的时候，才抛发异常。</p>
<p>举个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isList</span><span class="params">(Object obj)</span></span>;<span class="comment">//判断obj是否是List&lt;&gt;.</span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">getLengthOfList</span><span class="params">(Object obj)</span></span>;<span class="comment">//获得obj的长度。</span></span><br></pre></td></tr></table></figure>

<p>现在，假设传入的参数不是<code>List&lt;&gt;</code>类型，那么，函数<code>isList()</code>就不应该throw exception. 因为这完全在意料之中啊。而函数<code>getLengthOfList()</code>的前提假设就是你传进来的参数必须是<code>List&lt;&gt;</code>，否则这个函数就木有意义；此时，你传进来的参数，我处理不了，所以要throw exception。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://blog.bookbook.in/2016/03/04/%E6%8A%80%E6%9C%AF/[UML]%E6%9E%84%E6%9E%B6%E5%B8%88%E8%A6%81%E7%86%9F%E7%BB%83%E4%BD%BF%E7%94%A8UML/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="知明所以">
      <meta itemprop="description" content="关系、健康、自由，是我的追求。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Book Book, Come in~">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/04/%E6%8A%80%E6%9C%AF/%5BUML%5D%E6%9E%84%E6%9E%B6%E5%B8%88%E8%A6%81%E7%86%9F%E7%BB%83%E4%BD%BF%E7%94%A8UML/" class="post-title-link" itemprop="url">[UML]构架师要熟练使用UML</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-03-04 13:52:00" itemprop="dateCreated datePublished" datetime="2016-03-04T13:52:00+08:00">2016-03-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-01-13 13:00:17" itemprop="dateModified" datetime="2019-01-13T13:00:17+08:00">2019-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>摘要：我学习<code>UML</code>，是为了利用前人已经定义好的符号，来协助整理我的思路。人类用简单的符号来代替大段复杂的含义，已经有好几千年的历史了。但人类每一天都在发明新事物，通用语言根本无法跟上这个速度，就导致我们经常需要用一大段话来表达一个经常使用的含义。所以，我需要学习一门抽象化层次更高的语言：UML。</p>
<p>上个时代的软件工程书，总教育我们要多去采访客户，了解他们在工作场景中的各种需求，总结Use Case。因为那个时代，软件只是一种为其它事情服务的工具，一种辅助角色的存在。但是现在，软件有更大的主动性。我们创造的软件，是要通过以往完全没有过的方式来满足人们炫耀、沟通、分享的需求。在产品问世之前，根本没有人对它有过操作经历，根本没有用户可以了解。时代变了，软件的角色变了，软件管理的方式也要改变。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://blog.bookbook.in/2016/03/04/%E6%8A%80%E6%9C%AF/[PHP]%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Yii2%E7%9A%84%E5%9F%BA%E7%A1%80%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="知明所以">
      <meta itemprop="description" content="关系、健康、自由，是我的追求。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Book Book, Come in~">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/04/%E6%8A%80%E6%9C%AF/%5BPHP%5D%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Yii2%E7%9A%84%E5%9F%BA%E7%A1%80%E7%B1%BB/" class="post-title-link" itemprop="url">[PHP]深入理解Yii2的基础类</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-03-04 09:12:00" itemprop="dateCreated datePublished" datetime="2016-03-04T09:12:00+08:00">2016-03-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-01-13 13:00:17" itemprop="dateModified" datetime="2019-01-13T13:00:17+08:00">2019-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>摘要：了解<code>Yii2</code>框架的基础支撑类。</p>
<h1 id="Component"><a href="#Component" class="headerlink" title="Component"></a>Component</h1><p><code>Component</code>是<code>Yii2</code>框架中非常重要的一个类。它主要实现了三个方面的功能：</p>
<ol>
<li><code>property</code>: 重写了<code>__get()</code>和<code>__set()</code>方法，可以直接调用<code>getter/setter</code>方法来读写属性，或者读写<code>behaviors</code>中的同名属性。</li>
<li><code>event</code>:允许其他实例在<code>Component</code>上注册监听事件，当<code>Component::trigger()</code>被调用时，对应的回调函数会被调用。</li>
<li><code>hehavior</code>:允许动态的为<code>Component</code>添加方法/接口。实现方式是：重写<code>__call()</code>方法，如果在<code>_behaviors</code>有同名的方法，也可以被调用。相当于扩展了<code>Component</code>的方法和属性。</li>
</ol>
<h2 id="Component-behaviors"><a href="#Component-behaviors" class="headerlink" title="Component::behaviors()"></a>Component::behaviors()</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span></span></span><br><span class="line">    + __call():</span><br><span class="line">        <span class="keyword">$this</span>-&gt;ensureBehaivors():</span><br><span class="line">        then call;</span><br><span class="line">    + ensureBehaviors():</span><br><span class="line">        <span class="keyword">$this</span>-&gt;attachBehaviorInternal();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;behaviors();</span><br></pre></td></tr></table></figure>

<h1 id="Behavior"><a href="#Behavior" class="headerlink" title="Behavior"></a>Behavior</h1><p>两个功能：</p>
<ol>
<li>把自己的方法注入的<code>Component</code>中去，增加<code>Component</code>的功能。</li>
<li>响应<code>$owner</code>抛发的事件，做对应的处理。</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Behavior</span></span></span><br><span class="line">    + attach($owner);</span><br><span class="line">    + detach();</span><br><span class="line">    + events();</span><br></pre></td></tr></table></figure>


<h1 id="ActionFilter"><a href="#ActionFilter" class="headerlink" title="ActionFilter"></a>ActionFilter</h1><p><code>ActionFilter</code>可以添加在<code>Module/Controller</code>上，监听<code>Module/Controller</code>的<code>beforeAction</code>和<code>afterAction</code>事件，做相应的处理。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class ActionFilter extends Behavior:</span><br><span class="line">    + attach($owner): <span class="comment">//当被添加到$owner上时，绑定$owner的'beforeAction'事件</span></span><br><span class="line">        $owner-&gt;on(<span class="string">'beforeAction'</span>,[<span class="keyword">$this</span>, <span class="string">'beforeFilter'</span>]);</span><br><span class="line">    + beforeFilter($event):</span><br><span class="line">        $event-&gt;isValid = <span class="keyword">$this</span>-&gt;beforeAction($event-&gt;action);</span><br><span class="line">        <span class="keyword">if</span> $event-&gt;$isValid then</span><br><span class="line">            <span class="keyword">$this</span>-&gt;owner-&gt;on(<span class="string">'afterAction'</span>,[<span class="keyword">$this</span>,<span class="string">'afterFilter'</span>]);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            $event-&gt;handled = <span class="keyword">true</span>;</span><br><span class="line">    + afterFilter($event);</span><br></pre></td></tr></table></figure>


<h1 id="SercieLocator"><a href="#SercieLocator" class="headerlink" title="SercieLocator"></a>SercieLocator</h1><p>ServiceLocator implements a <a href="http://en.wikipedia.org/wiki/Service_locator_pattern" target="_blank" rel="noopener">service locator</a>.</p>
<ul>
<li>To use ServiceLocator, you first need to register component IDs with the corresponding component definitions with the locator by calling <code>set()</code> or <code>setComponents()</code>.</li>
<li>You can then call <code>get()</code> to retrieve a component with the specified ID. The locator will automatically instantiate and configure the component according to the definition.</li>
</ul>
<p><code>ServiceLocator</code>重要的方法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class ServiceLocator:</span><br><span class="line">    + set($id,$defination); <span class="comment">//设置某个组件的定义</span></span><br><span class="line">    + get($id); <span class="comment">//如果未实例化，则根据定义新建。</span></span><br></pre></td></tr></table></figure>


<h1 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h1><p>MVC的重要组成部分，相当于一个路由，没啥核心功能：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class Controller:</span><br><span class="line">    + run($route,$params); <span class="comment">//执行Action</span></span><br><span class="line">    + renderXXX(); <span class="comment">//渲染输出结果，赋给Response</span></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://blog.bookbook.in/2016/03/03/%E6%8A%80%E6%9C%AF/[PHP]%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Yii2%E7%9A%84coreComponents/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="知明所以">
      <meta itemprop="description" content="关系、健康、自由，是我的追求。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Book Book, Come in~">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/03/%E6%8A%80%E6%9C%AF/%5BPHP%5D%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Yii2%E7%9A%84coreComponents/" class="post-title-link" itemprop="url">[PHP]深入理解Yii2的核心组件</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-03-03 11:12:00" itemprop="dateCreated datePublished" datetime="2016-03-03T11:12:00+08:00">2016-03-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-01-13 13:00:17" itemprop="dateModified" datetime="2019-01-13T13:00:17+08:00">2019-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>摘要：<a href="http://blog.bookbook.in/ji-zhu/-php-shen-ru-li-jie-yii2de-lifecycle">上一篇文章</a>中，我们了解了<code>Appliction</code>的生命周期大概做了哪些事情，在其中我们提到核心组件<code>Appliction::coreComponents</code>但未深入讲解。我将在此文中挑选一些重要的组件详细讲解。</p>
<h1 id="coreComponents"><a href="#coreComponents" class="headerlink" title="coreComponents"></a>coreComponents</h1><p><code>Application::coreComponents()</code> 是一个<code>Application</code>运行过程中必须的<code>component</code>，不管用户有没有在<code>config</code>文件中设置，这些组件都会创建和使用。<br>所有在<code>config</code>文件中设置或者在<code>coreComponents()</code>中的组件，都不需要手动创建，通过<code>Application-&gt;get($componentId)</code>都可以自动创建。</p>
<p><code>\yii\base\Application</code>的核心组件：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">coreComponents</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">        <span class="string">'log'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\log\Dispatcher'</span>],</span><br><span class="line">        <span class="string">'view'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\View'</span>],</span><br><span class="line">        <span class="string">'formatter'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\i18n\Formatter'</span>],</span><br><span class="line">        <span class="string">'i18n'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\i18n\I18N'</span>],</span><br><span class="line">        <span class="string">'mailer'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\swiftmailer\Mailer'</span>],</span><br><span class="line">        <span class="string">'urlManager'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\UrlManager'</span>],</span><br><span class="line">        <span class="string">'assetManager'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\AssetManager'</span>],</span><br><span class="line">        <span class="string">'security'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\base\Security'</span>],</span><br><span class="line">    ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><code>\yii\web\Application</code>的必要组件：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">coreComponents</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> array_merge(<span class="keyword">parent</span>::coreComponents(), [</span><br><span class="line">        <span class="string">'request'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\Request'</span>],</span><br><span class="line">        <span class="string">'response'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\Response'</span>],</span><br><span class="line">        <span class="string">'session'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\Session'</span>],</span><br><span class="line">        <span class="string">'user'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\User'</span>],</span><br><span class="line">        <span class="string">'errorHandler'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\ErrorHandler'</span>],</span><br><span class="line">    ]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>下文，我们将对<code>view,urlManager,assetManager,security,request,response,session,user</code>这几个组件做详细讲解。</p>
<h1 id="yii-web-Request"><a href="#yii-web-Request" class="headerlink" title="yii\web\Request"></a>yii\web\Request</h1><p><code>Request</code>代表着一次HTTP请求，它封装了<code>$_SERVER</code>的大多数变量，并且对不同平台的浏览器做了兼容处理。同时，它还封装了一些方便的访问接口来访问诸如<code>$_POST</code>，<code>$_GET</code>，<code>$_COOKIES</code>，<code>_REST</code>的参数。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Request</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    validateCsrfToken($token); <span class="comment">//验证csrf码是否合法。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="关于CSRF验证"><a href="#关于CSRF验证" class="headerlink" title="关于CSRF验证"></a>关于CSRF验证</h2><p>服务器在接受一次请求，都会向前端发送两个字符串：一个在返回的HTML的<code>head</code>中；另一个在cookie中。这两个字符串是互相匹配的，可通过某种算法得到另一个。当用户发送非安全的请求时，需要在请求中把head中的那个字符串附带上，这样，服务器会判断这两个字符串是否匹配。</p>
<h2 id="Component-behaviors"><a href="#Component-behaviors" class="headerlink" title="Component::behaviors()"></a>Component::behaviors()</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span></span></span><br><span class="line">    + __call() / </span><br><span class="line">        + <span class="keyword">$this</span>-&gt;ensureBehaivors();</span><br><span class="line">            + <span class="keyword">$this</span>-&gt;attachBehaviorInternal();</span><br><span class="line">            + <span class="keyword">$this</span>-&gt;behaviors();</span><br></pre></td></tr></table></figure>

<h2 id="ActionFilter"><a href="#ActionFilter" class="headerlink" title="ActionFilter"></a>ActionFilter</h2><p><code>ActionFilter</code>可以添加在<code>Module/Controller</code>上，监听<code>Module/Controller</code>的<code>beforeAction</code>和<code>afterAction</code>事件，做相应的处理。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class ActionFilter:</span><br><span class="line">    + attach($owner): <span class="comment">//当被添加到$owner上时，绑定$owner的'beforeAction'事件</span></span><br><span class="line">        $owner-&gt;on(<span class="string">'beforeAction'</span>,[<span class="keyword">$this</span>, <span class="string">'beforeFilter'</span>]);</span><br><span class="line">    + beforeFilter($event):</span><br><span class="line">        $event-&gt;isValid = <span class="keyword">$this</span>-&gt;beforeAction($event-&gt;action);</span><br><span class="line">        <span class="keyword">if</span> $event-&gt;$isValid then</span><br><span class="line">            <span class="keyword">$this</span>-&gt;owner-&gt;on(<span class="string">'afterAction'</span>,[<span class="keyword">$this</span>,<span class="string">'afterFilter'</span>]);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            $event-&gt;handled = <span class="keyword">true</span>;</span><br><span class="line">    + afterFilter($event);</span><br></pre></td></tr></table></figure>


<h1 id="yii-web-Session"><a href="#yii-web-Session" class="headerlink" title="yii\web\Session"></a>yii\web\Session</h1><h1 id="yii-web-User"><a href="#yii-web-User" class="headerlink" title="\yii\web\User"></a>\yii\web\User</h1><p><code>\yii\web\User</code>是用来处理用户验证和用户登录状态的类。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义：</span></span><br><span class="line">class User:</span><br><span class="line">    + login(); <span class="comment">//调用switchIdentify()，抛发一系列事件。</span></span><br><span class="line">    + loginByAccessToken($token,$type); <span class="comment">//如果findIdentityByAccessToken()成功，则login()</span></span><br><span class="line">    + loginByCookie(); <span class="comment">//如果Cookie中，id+authKey+duration都能对的上，则登陆成功，调用switchIdentify()</span></span><br><span class="line">    + switchIdentify(); <span class="comment">//setIdentify()，然后设置session和cookie</span></span><br><span class="line"></span><br><span class="line">    + renewAuthStatus(); <span class="comment">//根据SessionId获得Identify。如果已经过期，则logout()；如果enableAutoLogin，则loginByCookie()；如果autoRenewCookie，则renewIdentifyCookie()。</span></span><br><span class="line">    + renewIdentityCookie(); <span class="comment">//更新Cookie的过期时间为从当前开始。</span></span><br><span class="line">    + getIdentify($autoRenew = <span class="keyword">true</span>); <span class="comment">//if $enableSession &amp;&amp; $autoRenew then renewAuthStatus(). 最终返回Identify.</span></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://blog.bookbook.in/2016/03/02/%E6%8A%80%E6%9C%AF/[PHP]%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Yii2%E7%9A%84lifecycle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="知明所以">
      <meta itemprop="description" content="关系、健康、自由，是我的追求。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Book Book, Come in~">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/02/%E6%8A%80%E6%9C%AF/%5BPHP%5D%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Yii2%E7%9A%84lifecycle/" class="post-title-link" itemprop="url">[PHP]深入理解Yii2的生命周期</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-03-02 18:12:00" itemprop="dateCreated datePublished" datetime="2016-03-02T18:12:00+08:00">2016-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-01-13 13:00:17" itemprop="dateModified" datetime="2019-01-13T13:00:17+08:00">2019-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>摘要：此文章为自己阅读Yii2框架代码的笔记，故不成为一篇完整的文章。如果你也在读Yii2的源码，或对Yii2很熟悉，可以作为参考。否则，可能很难懂。</p>
<h1 id="yii-web-Application的生命周期"><a href="#yii-web-Application的生命周期" class="headerlink" title="\yii\web\Application的生命周期"></a>\yii\web\Application的生命周期</h1><p>在Yii2中，Application的生命分两步：__contruct()和run()。下面为这两步过程的调用层级关系。每一次缩进代表函数调用栈的增进异步。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class Application :</span><br><span class="line">    + __contruct():</span><br><span class="line">        preInit($config); <span class="comment">//把coreComponents()添加到$config中去</span></span><br><span class="line">        registerErrorHandler($config); </span><br><span class="line">        Component::__coustruct($config):</span><br><span class="line">            Yii::configure(<span class="keyword">$this</span>,$config):</span><br><span class="line">                ServiceLocator::set($id,$definition); <span class="comment">//设置每个组件的defination</span></span><br><span class="line">            Application::init():</span><br><span class="line">                Application::bootstrap(); <span class="comment">//每个extension,每个bootstrap,createObject() AND bootstrap().</span></span><br><span class="line">    + run(): <span class="comment">//处理request, 抛发一系列事件。</span></span><br><span class="line">        handleRequest();</span><br><span class="line">        reponse-&gt;send();</span><br></pre></td></tr></table></figure>


<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class Application extends \yii\base\Application:</span><br><span class="line">    + handleRequest():</span><br><span class="line">        Request::resolve(): <span class="comment">//根据URL解析出 [$route, params]</span></span><br><span class="line">            UrlManager::parseRequest(<span class="keyword">$this</span>); <span class="comment">//根据URL解析出 [$route, params]</span></span><br><span class="line">        $response = runAction($route,$params); <span class="comment">// inherate from Module::runAction():</span></span><br><span class="line">            $controller=Module::createController($route, $params); <span class="comment">//根据$route找到并创建Controller</span></span><br><span class="line">            $response=$controller-&gt;runAction($actionId, $params):</span><br><span class="line">                $action=Controller::createAction($id):</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> InlineAction(<span class="keyword">$this</span>,$methodName);</span><br><span class="line">                $action-&gt;runWithParams($params):</span><br><span class="line">                    $controller-&gt;bindActionParams(); <span class="comment">//为method准备参数</span></span><br><span class="line">                    call the method;</span><br><span class="line">                <span class="keyword">return</span> $result;</span><br><span class="line">            <span class="keyword">return</span> $response;</span><br><span class="line">        <span class="keyword">return</span> $response;</span><br></pre></td></tr></table></figure>



<h1 id="coreComponents"><a href="#coreComponents" class="headerlink" title="coreComponents"></a>coreComponents</h1><p>Application::coreComponents() 是一个Application必须的component，不管用户有没有在config文件中设置，这些组件都会创建和使用。<br>所有在config文件中设置或者在coreComponents()中的组件，都不需要手动创建，通过Application-&gt;get($componentId)都可以自动创建。</p>
<p>\yii\base\Application的核心组件：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">coreComponents</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">        <span class="string">'log'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\log\Dispatcher'</span>],</span><br><span class="line">        <span class="string">'view'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\View'</span>],</span><br><span class="line">        <span class="string">'formatter'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\i18n\Formatter'</span>],</span><br><span class="line">        <span class="string">'i18n'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\i18n\I18N'</span>],</span><br><span class="line">        <span class="string">'mailer'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\swiftmailer\Mailer'</span>],</span><br><span class="line">        <span class="string">'urlManager'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\UrlManager'</span>],</span><br><span class="line">        <span class="string">'assetManager'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\AssetManager'</span>],</span><br><span class="line">        <span class="string">'security'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\base\Security'</span>],</span><br><span class="line">    ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>\yii\web\Application的必要组件：coreComponents()</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">coreComponents</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> array_merge(<span class="keyword">parent</span>::coreComponents(), [</span><br><span class="line">        <span class="string">'request'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\Request'</span>],</span><br><span class="line">        <span class="string">'response'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\Response'</span>],</span><br><span class="line">        <span class="string">'session'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\Session'</span>],</span><br><span class="line">        <span class="string">'user'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\User'</span>],</span><br><span class="line">        <span class="string">'errorHandler'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'yii\web\ErrorHandler'</span>],</span><br><span class="line">    ]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<h1 id="yii-BaseYii"><a href="#yii-BaseYii" class="headerlink" title="\yii\BaseYii"></a>\yii\BaseYii</h1><p><code>BaseYii</code>重要的方法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">clss BaseYii:</span><br><span class="line">    + createObject($type, <span class="keyword">array</span> $params = []); <span class="comment">//根据配置信息创建Object</span></span><br><span class="line">    + configure($object, $properties); <span class="comment">// copy properties</span></span><br></pre></td></tr></table></figure>





<p>到此，我们大概了解了Application的生命周期里，主要做了哪些事情。当然，本文只介绍了概要流程。因为，涉及到具体的<code>coreComponents()</code>我们涉及的很少，而这些才是真正做事情的类，我们将在<a href="http://blog.bookbook.in/ji-zhu/-php-shen-ru-li-jie-yii2de-corecomponents">下一篇文章</a>中介绍。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://blog.bookbook.in/2016/03/01/%E6%8A%80%E6%9C%AF/[RESTful]%E6%9C%80%E4%BC%98%E9%9B%85%E7%9A%84RESTful%E8%AE%BE%E8%AE%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="知明所以">
      <meta itemprop="description" content="关系、健康、自由，是我的追求。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Book Book, Come in~">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/01/%E6%8A%80%E6%9C%AF/%5BRESTful%5D%E6%9C%80%E4%BC%98%E9%9B%85%E7%9A%84RESTful%E8%AE%BE%E8%AE%A1/" class="post-title-link" itemprop="url">[RESTful]最优雅的RESTful设计</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-03-01 00:00:00" itemprop="dateCreated datePublished" datetime="2016-03-01T00:00:00+08:00">2016-03-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-01-13 13:00:17" itemprop="dateModified" datetime="2019-01-13T13:00:17+08:00">2019-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>摘要：RESTful设计，着重点在于理解四个概念：资源（resources)、资源的命名(naming)、资源的表达方式(representations)、资源间的链接（Link)。一个设计是否足够RESTful，取决于四个方面的属性：addressability, statelessness,connectedness and the uniform interface。</p>
<h2 id="Web-is-Simple"><a href="#Web-is-Simple" class="headerlink" title="Web is Simple"></a>Web is Simple</h2><p>REST的全称是Representational State Transfer，翻译过来是“代表性的状态转换”，虽然不知道在说啥，但这并不重要，不必过分关注它晦涩的名字。</p>
<p>REST的初衷，是想从Method和URI两个角度统一Web世界。Method，就是HTTP的那几个固定的方法，GET、PUT、DELETE、POST几兄弟，他们的意义在正常人眼里都是固定的。URI就不多说了，就是资源的门牌号码。我们假设，Web世界里所有的服务提供商都用这一套不仅人类可阅读，而且机器可识别的接口，该有多美好。</p>
<p>Web是基于HTTP构建的，它其实是一个最简单的协议。想当初HTTP 还是0.9版本的时候，就是一个静态文件读取协议，那么的单纯：</p>
<table>
<thead>
<tr>
<th>Client Request</th>
<th>Server Response</th>
</tr>
</thead>
<tbody><tr>
<td>GET /hello.txt</td>
<td>Hello, world!</td>
</tr>
</tbody></table>
<p>在这里，我们看到了HTTP最重要的两个品质：adressability and statelessness。基于他们，HTTP得飞黄腾达、光宗耀祖。</p>
<h2 id="Big-Web-Services-Are-Not-Simple"><a href="#Big-Web-Services-Are-Not-Simple" class="headerlink" title="Big Web Services Are Not Simple"></a>Big Web Services Are Not Simple</h2><p>常见的 RPC-style 服务，就是把Method、地址、参数都统统塞进HTTP的body里，用envelope封装起来。人们很难看到，这个方法是什么意思，参数是什么意思；也不知道这个方法有没有 side effect, 是否数据安全（safe）；是否有状态（stateness)，在什么样的前置条件下才能得到正确的结果。。。</p>
<p>这一切，都让Web变得不单纯鸟。</p>
<h2 id="How-To-Design-And-Implement-RESTful-Web-Service"><a href="#How-To-Design-And-Implement-RESTful-Web-Service" class="headerlink" title="How To Design And Implement RESTful Web Service"></a>How To Design And Implement RESTful Web Service</h2><h2 id="What-Is-Means-To-Be-RESTful"><a href="#What-Is-Means-To-Be-RESTful" class="headerlink" title="What Is Means To Be RESTful"></a>What Is Means To Be RESTful</h2><h2 id="Why-Web-Service-Should-be-More-RESTful"><a href="#Why-Web-Service-Should-be-More-RESTful" class="headerlink" title="Why Web Service Should be More RESTful"></a>Why Web Service Should be More RESTful</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">知明所以</p>
  <div class="site-description" itemprop="description">关系、健康、自由，是我的追求。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">75</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">236</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zjh1943" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zjh1943" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jhzhuustc@gmail.com" title="E-Mail → mailto:jhzhuustc@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">知明所以</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
